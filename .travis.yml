language: node_js
node_js:
  - 'node'
cache:
  directories:
    - node_modules

addons:
  sonarcloud:
    organization: "wpocanvas"

script:
  - npm install  serverless-webpack
  - npm install -g serverless
  - sonar-scanner
deploy:
  provider: lambda
  runtime: nodejs12.x
  function_name: "AuditToolBackend-dev-product"
  skip_cleanup: true
  region: "ap-south-1"
  role: arn:aws:iam::474717861439:role/audit-tool-backend-travis
  module_name: src/products/handler
  handler_name: "product"
  on:
    repo: WPOCanvas/Audit-Tool-Backend
    branches:
      only:
        - master
